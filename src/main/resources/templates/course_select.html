<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Chọn khóa học</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 900px;
      margin: 40px auto;
    }
    h1 {
      text-align: center;
    }
    .layout {
      display: grid;
      grid-template-columns: 1.2fr 1.8fr;
      gap: 20px;
      margin-top: 20px;
    }
    .card {
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 16px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }
    .field {
      margin-bottom: 15px;
    }
    label {
      display: block;
      font-weight: bold;
      margin-bottom: 6px;
    }
    select, input[type="radio"] {
      font-size: 14px;
    }
    .radio-group {
      display: flex;
      gap: 16px;
    }
    .btn {
      padding: 8px 16px;
      border-radius: 4px;
      border: 1px solid #333;
      background: #4caf50;
      color: #fff;
      cursor: pointer;
      font-size: 14px;
    }
    .btn:hover {
      opacity: 0.9;
    }
    .lesson-list {
      font-size: 14px;
    }
    .lesson-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 6px 0;
      border-bottom: 1px solid #eee;
    }
    .lesson-info {
      display: flex;
      flex-direction: column;
    }
    .lesson-meta {
      color: #666;
      font-size: 12px;
    }
    .badge {
      display: inline-block;
      padding: 2px 6px;
      border-radius: 3px;
      background: #ffeb3b;
      font-size: 11px;
    }
    .empty {
      font-size: 14px;
      color: #666;
    }
  </style>
</head>
<body>

<h1>Chọn khóa học</h1>

<div class="layout">

  <!-- CỘT TRÁI: form chọn khóa học -->
  <div class="card">
    <h3>Chọn ngôn ngữ & trình độ</h3>
    <form th:action="@{/courses/select}" method="post">

      <!-- Ngôn ngữ -->
      <div class="field">
        <label>Ngôn ngữ</label>
        <div class="radio-group">
          <label>
            <input type="radio" name="language" value="cn"
                   th:checked="${selectedLang == 'cn'}"/>
            Tiếng Trung
          </label>
          <label>
            <input type="radio" name="language" value="en"
                   th:checked="${selectedLang == 'en'}"/>
            Tiếng Anh
          </label>
        </div>
      </div>

      <!-- Trình độ -->
      <div class="field">
        <label>Trình độ</label>
        <select name="level">
          <option value="A1" th:selected="${selectedLevel == 'A1'}">A1</option>
          <option value="A2" th:selected="${selectedLevel == 'A2'}">A2</option>
          <!-- sau này thêm B1, B2, HSK1,... -->
        </select>
      </div>

      <button type="submit" class="btn">Vào học</button>
    </form>
  </div>

  <!-- CỘT PHẢI: danh sách bài đến hạn ôn -->
  <div class="card">
    <h3>Bài đến hạn ôn tập</h3>

    <div th:if="${#lists.isEmpty(dueLessons)}" class="empty">
      Hiện chưa có bài nào đến hạn ôn. ✨
    </div>

    <div th:if="${!#lists.isEmpty(dueLessons)}" class="lesson-list">
      <div th:each="ls : ${dueLessons}" class="lesson-item">
        <div class="lesson-info">
          <span th:text="'Bài ' + ${ls.lessonIndex}"></span>
          <span class="lesson-meta"
                th:text="${ls.languageCode} + ' - ' + ${ls.level}"></span>
          <span class="lesson-meta">
                        Hạn ôn:
                        <span th:text="${#temporals.format(ls.nextReviewAt, 'dd/MM')}"></span>
                        &nbsp;|&nbsp;
                        <span class="badge" th:text="'Giai đoạn ' + ${ls.reviewStage}"></span>
                    </span>
        </div>
        <a class="btn"
           th:href="@{|/courses/${ls.languageCode}/${ls.level}/lessons/${ls.lessonIndex}/quiz?mode=1|}">
          Ôn ngay
        </a>
      </div>
    </div>
  </div>

</div>

</body>
</html>
